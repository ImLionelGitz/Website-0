const prefersDarkScheme=window.matchMedia("(prefers-color-scheme: dark)"), mobilemode=window.matchMedia('screen and (max-width: 600px)');var themeData=localStorage.getItem('theme'), Elements=document.getElementsByClassName('light-theme'), overlay=document.getElementById('overlyneeded'), menuButton=document.getElementById('menu'), gearButton=document.getElementById('gear'), userCheckBox=document.getElementById('userCheckBox'), deviceCheckBox=document.getElementById('deviceCheckBox'), navigationBar=document.getElementById('navigation'), newsButton=document.getElementById('newButton'), MenuOpened=false, SettingsOpened=false, isUseDeviceThemeOn=false, isNewsSectionOpen=false, databaseLocation="https://raw.githubusercontent.com/ImLionelGitz/AppsDatabase/main/apps.json";if (document.getElementsByClassName('splide').length !=0 || document.getElementsByClassName('splide')==undefined){if (window.location.href.indexOf('appdetails')==-1){new Splide('.splide',{arrows: false, pagination: false, lazyLoad: true}).mount();}}if (window.location.href.indexOf('games') !=-1){var container=document.getElementById('listofitems'); fetch(databaseLocation).then(function (resp){return resp.json();}).then(function (data){var items=Object.keys(data); for (let i=0; i < items.length; i++){const item=data[items[i]]; var appitem=document.createElement('div'); appitem.className='app_item'; var htmlTemplate=` <div class="item"> <img src="${item.icon}" alt=""> <h1>${item.name}</h1> <a href="../appdetails/?${items[i].replace('app', 'id=')}">Check 'Em</a> </div>`; appitem.innerHTML=htmlTemplate; container.appendChild(appitem);}});}if (window.location.href.indexOf('appdetails/?') !=-1){const queryString=window.location.search; const urlParams=new URLSearchParams(queryString).get('id'); var sliderContainer=document.getElementsByClassName('sliderobject')[0]; var downloadContainer=document.getElementsByClassName('downloadbutton')[0]; var thumbContainer=document.getElementById('slider_inner'); var platformContainer=document.getElementById('platforms'); var infoContainer=document.getElementById('info'); var h1=infoContainer.getElementsByTagName('h1')[0]; var p=infoContainer.getElementsByTagName('p')[0]; fetch(databaseLocation).then(function (resp){return resp.json();}).then(function (data){const app=data['app' + urlParams]; const thumbnails=app.thumbnails; const available=app.available; h1.innerText=app.name; document.title=app.name + " - ImLionelGamer"; p.innerText=app.description; if (thumbnails.length==0){var liElement=document.createElement('li'); const thumbTemplate=` <div class="siteitem"> <img src="../assets/thumbnailplaceholder.jpg" alt=""> </div>`; liElement.className='splide__slide'; liElement.innerHTML=thumbTemplate; thumbContainer.appendChild(liElement); new Splide('.splide',{arrows: false, pagination: false}).mount();}else{for (let i=0; i < thumbnails.length; i++){const thumbnail=thumbnails[i]; var liElement=document.createElement('li'); const thumbTemplate=` <div class="siteitem"> <img data-splide-lazy="${thumbnail}" src="../assets/thumbnailplaceholder.jpg" alt=""> </div>`; liElement.className='splide__slide'; liElement.innerHTML=thumbTemplate; thumbContainer.appendChild(liElement);}new Splide('.splide',{arrows: false, pagination: false, type: 'loop', lazyLoad: true}).mount();}if (Object.keys(available).length !=0){for (let i=0; i < available.platforms.length; i++){const platform=available.platforms[i]; var aElement=document.createElement('a'); aElement.href=platform[0]; aElement.target='_blank'; const platformTemplate=`<i class="${platform[1]}"></i>`; aElement.innerHTML=platformTemplate; platformContainer.appendChild(aElement);}}else{var notAvailableText=document.getElementById('notAvailable'); notAvailableText.style.display='block';}sliderContainer.style.display='block'; downloadContainer.style.display='block';});}document.getElementById('displayYear').innerText=new Date().getFullYear().toString();prefersDarkScheme.addEventListener('change', function (event){if (!isUseDeviceThemeOn){return;}for (let i=0; i < Elements.length; i++){const element=Elements[i]; if (event.matches){element.className +=' dark-theme';}else{if (element.classList.contains('dark-theme')){element.classList.remove('dark-theme');}}}});window.addEventListener('load', function (){var UTbutton=document.getElementById('manualToggle'); var UTbuttonContainer=document.getElementById('UTM'); var DTbuttonContainer=document.getElementById('DTM'); var userThemeToggle=UTbuttonContainer.getElementsByTagName('input')[0]; var deviceThemeToggle=DTbuttonContainer.getElementsByTagName('input')[0]; for (let i=0; i < Elements.length; i++){const element=Elements[i]; if (themeData=='darkU'){userThemeToggle.checked=true; UTbuttonContainer.getElementsByTagName('h2')[0].innerText='Dark'; element.className +=' dark-theme';}if (themeData=='darkDT'){UTbutton.className +=' off'; UTbuttonContainer.className +=' off'; deviceThemeToggle.checked=true; isUseDeviceThemeOn=true; if (prefersDarkScheme.matches){element.className +=' dark-theme';}}if (themeData=='darkUDT'){UTbutton.className +=' off'; UTbuttonContainer.className +=' off'; deviceThemeToggle.checked=true; userThemeToggle.checked=true; UTbuttonContainer.getElementsByTagName('h2')[0].innerText='Dark'; isUseDeviceThemeOn=true; if (prefersDarkScheme.matches){element.className +=' dark-theme';}}}if (window.location.href.indexOf('videos') !=-1){new Blazy();}});mobilemode.addEventListener('change', function (event){var transp=document.getElementById('transperent'); if (event.matches && transp !=null){transp.id='';}});newsButton.addEventListener('click', function (){var newssection=document.getElementsByClassName('mainnews')[0]; if (!isNewsSectionOpen){isNewsSectionOpen=true; newssection.className +=' newsHChange';}else{isNewsSectionOpen=false; newssection.classList.remove('newsHChange');}});menuButton.addEventListener('click', function (){var x=document.getElementById("mobilestyle"); if (!MenuOpened){x.style.height='128px'; MenuOpened=true;}else{x.style.height='0px'; MenuOpened=false;}});gearButton.addEventListener('click', function (){var x=document.getElementsByClassName('settingmodal'); x[0].style.width='330px'; overlay.style.display='block';});overlay.addEventListener('click', function (){var x=document.getElementsByClassName('settingmodal'); x[0].style.width='0px'; overlay.style.display='none';});userCheckBox.addEventListener('click', function (){var title=document.getElementById('skinoption'); for (let i=0; i < Elements.length; i++){const element=Elements[i]; if (userCheckBox.checked){title.innerText='Dark'; element.className +=' dark-theme'; localStorage.setItem('theme', 'darkU');}else{title.innerText='Light'; element.classList.remove('dark-theme'); localStorage.removeItem('theme');}}});deviceCheckBox.addEventListener('click', function (){var UTbutton=document.getElementById('manualToggle'); var UTbuttonContainer=document.getElementById('UTM'); var userThemeToggle=UTbuttonContainer.getElementsByTagName('input')[0]; for (let i=0; i < Elements.length; i++){const element=Elements[i]; if (deviceCheckBox.checked){UTbutton.className +=' off'; UTbuttonContainer.className +=' off'; if (prefersDarkScheme.matches){element.className +=' dark-theme';}else{if (element.classList.contains('dark-theme')){element.classList.remove('dark-theme');}}if (userThemeToggle.checked){localStorage.setItem('theme', 'darkUDT');}else{localStorage.setItem('theme', 'darkDT');}isUseDeviceThemeOn=true;}else{UTbutton.className='slider'; UTbuttonContainer.className='switch'; if (element.classList.contains('dark-theme')){element.classList.remove('dark-theme');}if (localStorage.getItem('theme')){localStorage.removeItem('theme');}if (userThemeToggle.checked){element.className +=' dark-theme'; localStorage.setItem('theme', 'darkU');}isUseDeviceThemeOn=false;}}});navigationBar.addEventListener('mouseenter', function (){if (navigationBar.id !='' && !mobilemode.matches){navigationBar.id='';}});navigationBar.addEventListener('mouseleave', function (){if (navigationBar.id=='' && !mobilemode.matches){navigationBar.id='transperent';}});
